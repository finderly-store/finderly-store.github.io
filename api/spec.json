openapi: 3.0.0
info:
  title: Finderly API
  description: API for uploading images and generating home services leads.
  version: 1.0.0
  contact:
    name: Finderly Support
    email: support@finderly.com
servers:
  - url: https://s.finderly.store/
    description: Production Server

paths:
  /sc-image-upload:
    post:
      summary: Upload an image
      description: Uploads a JPG image under 2000 pixels on the longest side to Finderly. Returns a unique image UUID.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - image
              properties:
                image:
                  type: string
                  description: Base64 encoded JPG image under 2000 pixels on the longest side.
      responses:
        '200':
          description: Image uploaded successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  image_uuid:
                    type: string
                    example: "123e4567-e89b-12d3-a456-426614174000.jpg"
        '400':
          description: Invalid image data
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Invalid image format or dimensions."
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Error uploading image."

  /sc-lead:
    post:
      summary: Generate a lead from an image
      description: Converts an uploaded image into a home services lead. Optionally accepts a zip code and a user query to refine the output.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - image_uuid
              properties:
                image_uuid:
                  type: string
                  description: Unique identifier for the uploaded image.
                query:
                  type: string
                  description: Optional user query to refine the output.
                zipcode:
                  type: string
                  description: Optional user's postal code.
      responses:
        '200':
          description: Lead generated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  body:
                    type: string
                    description: Assistant's response based on the image and provided details.
                  thread:
                    type: string
                    description: Identifier for the conversation thread.
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "image_uuid is required."
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Failed to process the request."
